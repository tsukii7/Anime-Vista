> ğŸŒ View in Chinese: [ç®€ä½“ä¸­æ–‡](./README.zh-CN.md)

## ğŸ§± Project Structure

This project follows a responsibility-based structure using the Model-View-Presenter (MVP) architecture.

For detailed mapping between the frontend UI and project files, refer to [`relationship.pptx`](./relationship.pptx).

```text
anime-vista/
â”œâ”€â”€ .firebase/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ .husky/
â”‚   â”œâ”€â”€ _/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ commit-msg
â”œâ”€â”€ .react-router/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ build/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ architecture/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ contribution/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ dev-guide/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ firebase/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ routing/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ state/
â”‚       â””â”€â”€ ...
â”œâ”€â”€ functions/
â”‚   â”œâ”€â”€ build/
â”‚   â”‚   â””â”€â”€ server/
â”‚   â”‚       â””â”€â”€ index.js
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ public/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ copySSR.mjs
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ store.js
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ firebase/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ authentication/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ current/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ details/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ developer/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ me/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ rank/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ user/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”œâ”€â”€ presenters/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ entry.client.jsx
â”‚   â”‚   â”œâ”€â”€ entry.server.jsx
â”‚   â”‚   â”œâ”€â”€ root.jsx
â”‚   â”‚   â””â”€â”€ routes.js
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ views/
â”‚       â”œâ”€â”€ About/
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ Current/
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ Details/
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ Home/
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ LoginRegister/
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ Me/
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ Rank/
â”‚       â”‚   â””â”€â”€ ...
â”‚       â””â”€â”€ Search/
â”‚           â””â”€â”€ ...
â”œâ”€â”€ .env
â”œâ”€â”€ .firebaserc
â”œâ”€â”€ .gitignore
â”œâ”€â”€ commitlint.config.cjs
â”œâ”€â”€ eslint.config.js
â”œâ”€â”€ firebase.json
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ react-router.config.js
â”œâ”€â”€ README.md
â”œâ”€â”€ README.zh-CN.md
â”œâ”€â”€ server.js
â””â”€â”€ vite.config.js
```

### ğŸ“ `.husky/`

Configuration directory for Git hooks using [Husky](https://typicode.github.io/husky/).  
Automates validation tasks before certain Git operations to help ensure code quality.

- [`_/`](../../.husky/_/):  
  Internal helper scripts auto-generated by Husky, typically used for environment setup.  
  No manual edits required.

- [`commit-msg`](../../.husky/commit-msg):  
  Triggered on every commit to run `commitlint` and enforce Angular-style commit message conventions,  
  preventing improperly formatted commits.

Only the `commit-msg` hook is enabled in this projectï¼Œ other husky hooks like `pre-commit` or `pre-push` can be added as
needed in future.

---

### ğŸ“ `.react-router/`

A cache directory auto-generated by `@react-router/dev` during the build process.  
It contains intermediate states and temporary outputs related to route module compilation.

- No need for manual editing or inspection
- Automatically regenerated on every `react-router build` (configured as `npm run build` in this project)
- Included in `.gitignore`

---

### ğŸ“ `build/`

The output directory for server-side rendering (SSR) builds.  
Contains both client-side and server-side build artifacts, generated via the `react-router build` command (
`npm run build` in this project).

- `build/client/`: Static assets (JS, CSS, images, etc.) compiled by Vite, served to the browser
- `build/server/`: SSR modules used to handle server responses; entry point is `build/server/index.js`
- No manual modifications needed; directory is included in `.gitignore`

---

### ğŸ“ `.firebase/`

This directory is automatically generated by the Firebase CLI during project initialization and deployment. It serves as
a local cache for temporary files related to Firebase Hosting and **should be excluded** from version control via
`.gitignore`.

---

### ğŸ“ `.husky/`

Configuration directory for Git hooks using [Husky](https://typicode.github.io/husky/).  
Automates validation tasks before certain Git operations to help ensure code quality.

- [`_/`](../../.husky/_/):  
  Internal helper scripts auto-generated by Husky, typically used for environment setup.  
  No manual edits required.

- [`commit-msg`](../../.husky/commit-msg):  
  Triggered on every commit to run `commitlint` and enforce Angular-style commit message conventions,  
  preventing improperly formatted commits.

Only the `commit-msg` hook is enabled in this projectï¼Œ other husky hooks like `pre-commit` or `pre-push` can be added as
needed in future.

---

### ğŸ“ `.react-router/`

A cache directory auto-generated by `@react-router/dev` during the build process.  
It contains intermediate states and temporary outputs related to route module compilation.

- No need for manual editing or inspection
- Automatically regenerated on every `react-router build` (configured as `npm run build` in this project)
- Included in `.gitignore`

---

### ğŸ“ `build/`

The output directory for server-side rendering (SSR) builds.  
Contains both client-side and server-side build artifacts, generated via the `react-router build` command (
`npm run build` in this project).

- `build/client/`: Static assets (JS, CSS, images, etc.) compiled by Vite, served to the browser
- `build/server/`: SSR modules used to handle server responses; entry point is `build/server/index.js`
- No manual modifications needed; directory is included in `.gitignore`

---

### ğŸ“ `docs/`

Documentation folder, storing architecture notes, component guides, API docs, etc.

Guidelines:

1. Each topic gets a separate folder, containing markdown files and related assets.
2. The main file in each folder has English and Chinese versions, English version is `README.md`, Chinese version is
   `README.zh-CN.md`. Other files can be named as needed.
3. Each title in document can begin with an emoji to indicate its theme to reduce visual fatigue.

---

### ğŸ“ `functions/` Directory

This directory contains the code for Firebase Cloud Functions. It is packaged and uploaded to Cloud Functions during
deployment via the `firebase deploy` command, and serves as the backend execution environment for the SSR (Server-Side
Rendering) service.

---

### ğŸ“ `public/`

Stores static resources that are not processed by the build tool (Vite/Webpack). Files here are directly copied to the
final build and can be accessed via root path `/`.

Typical use cases:

- Files used directly by [`index.html`](../../index.html)
- `favicon.ico` for browser tabs
- Static images accessible via `<img src="/logo.png" />`
- SEO files such as `robots.txt`, `manifest.json`

ğŸ“Œ Do NOT store image assets used in dynamic components here. Use `src/assets/` instead.

---

### ğŸ“ `scripts/`

This directory contains custom Node.js scripts used during the project's build and deployment processes. It serves as a
developer utilities folder. Scripts in this directory are not part of the app runtime but help improve automation and
deployment efficiency.

Currently included:

- [`copySSR.mjs`](../../scripts/copySSR.mjs): After the build process, this script automatically copies server-side
  output from `build/server/` to `functions/build/server/` for Firebase Functions deployment. It detects the current
  operating system (Windows or macOS/Linux) and executes the appropriate copy commands to ensure cross-platform
  compatibility.

---

### ğŸ“ `src/`

Main source code directory, contains all React-related code, assets, and business logic.

This project uses the **Model-View-Presenter (MVP)** architecture:

- ğŸ§  Model â†’ [`src/models/`](../../src/models)
    - Manages application state using Redux Toolkit slices
    - Each page/module has its own state model
    - All update logic is encapsulated in reducers, avoiding state mutation in views

- ğŸ¨ View â†’ [`src/views/`](../../src/views) + [`src/components/`](../../src/components)
    - Handles UI and user interaction
    - No direct state logic inside view components
    - Pages reside in `views/`, each with its own subfolder (e.g. [`Home/`](../../src/views/Home), [
      `Current/`](../../src/views/Current))
    - Reusable components go into `components/`

- ğŸ§­ Presenter â†’ [`src/presenters/`](../../src/presenters)
    - Manages interaction between Model and View
    - Handles complex logic such as pagination, data fetching, combining states
    - View components call Presenter methods to modify state indirectly

#### ğŸ“ `src/app/`

Global configurations:

- [`store.js`](../../src/app/store.js): Redux store setup

#### ğŸ“ `src/assets/`

Assets used in React components, such as images, icons, fonts. These are processed by the build tool.

Use `import` to reference, e.g.:

```js
import loading from '../assets/loading.gif';

<img src={loading} alt="loading"/>;
```

Use cases:

- Images used in components (e.g. covers, avatars, icons)
- On-demand loaded assets (e.g. theme icons)
- Fonts, SVGs, and other frontend assets

ğŸ“Œ Do NOT store assets used by `index.html` here. Use `public/` instead.

#### ğŸ“ `src/components/`

Reusable components, further divided by function:

- [`card/`](../../src/components/card): Shared card components like `IntroCard`, used in multiple views
- [`layout/`](../../src/components/layout): Layout components such as `TopBar`, `SideBar`

#### ğŸ“ `src/firebase/`

Encapsulates all Firebase-related logic, such as config, auth, and Firestore interaction.

- [`config.js`](../../src/firebase/config.js): Initializes and exports Firebase App. Configs injected via `.env`.
- [`auth.js`](../../src/firebase/auth.js): Handles login, logout, register, get current user.
- [`db.js`](../../src/firebase/db.js): CRUD operations with Firestore, like favorites and user data submission.

#### ğŸ“ `src/models/`

Handles global state, organized by module:

- `authentication/`: Login and Register pages
- `current/`: Current season anime & timeline
- `details/`: Anime detail info, characters, etc.
- `developer/`: About Us page, contains static text
- `home/`: Home page recommended anime
- `rank/`: Anime ranking page
- `search/`: Filtering, searching, and results
- `user/`: User collections and activities

Use lowercase for folder names; prioritize readability over strict matching with view names.

#### ğŸ“ `src/presenters/`

Middle business logic layer between Model and View. Ensures decoupling.

Each page has exactly one Presenter, which handles all logic for that page.

#### ğŸ“ `src/routes/`

Centralized directory for managing all core files related to the React Router system.  
This folder is responsible for configuring the application's page structure, entry components, and client-side
initialization.  
It supports server-side rendering (SSR) and route preloading.

- [`routes.js`](../../src/routes/routes.js):  
  Defines the application's routing structure using the declarative API from `@react-router/dev`.  
  Each route maps to a corresponding Presenter, promoting decoupling and separation of concerns.

- [`root.jsx`](../../src/routes/root.jsx):  
  The top-level layout component that includes global UI elements like `TopBar` and `SideBar`.  
  Uses `<Outlet />` to render child routes dynamically.

- [`entry.client.jsx`](../../src/routes/entry.client.jsx):  
  The client entry point that mounts the React app and sets up React Router's client-side navigation.  
  Uses `hydrateRoot` to enable hydration for SSR.

#### ğŸ“ `src/styles/`

Global styles, included files:

- [`global.css`](../../src/styles/global.css): Global stylesheet
- [`LoginRegister.css`](../../src/styles/LoginRegister.css): Since the login and registration interfaces share a single
  Presenter and their styles are used by both Views, this file is also placed in the global styles directory.

#### ğŸ“ `src/views/`

Page-level view components. Each subfolder corresponds to a page.

- [`Home/`](../../src/views/Home)
- [`Current/`](../../src/views/Current)
- [`Search/`](../../src/views/Search)
- [`Rank/`](../../src/views/Rank)
- [`Details/`](../../src/views/Details)
- [`LoginRegister/`](../../src/views/LoginRegister)
- [`Me/`](../../src/views/Me)
- [`About/`](../../src/views/About)

Each page subdirectory typically contains the following:

- `[Prefix]View.jsx`: Usually there is only one main view file.

  If the page includes multiple subviews (e.g. toggleable layouts), there will be a main `[PageName]View.jsx` file
  acting as the entry point, and multiple `[PageName][SubViewSuffix]View.jsx` files representing each subview. The main
  view determines which subview to render based on state or props.

  Currently, pages with multiple view files include: `Current/` and `Me/`.

- `components/`: Contains components that are used only within this specific page. This directory may include nested
  folders and multiple files. Folder and file names inside should use PascalCase (start with an uppercase letter). Other
  naming conventions are up to the developer in charge of the page.

- `xxx.module.css`:

  CSS Module files used within the page. Naming follows the pattern `[ComponentName].module.css`, and the CSS file
  should be placed in the same directory as the component it styles (either directly beside the component or within the
  `components/` subfolder).

  The `.module.css` extension enables CSS Modules, which scope styles locally to each component. This prevents naming
  collisions and ensures styles only apply to their respective components.

- Example from [`Current/`](../../src/views/Current):
  ```txt
  â”œâ”€â”€ Current/                        # Directory for the page named "Current"
  â”‚   â”œâ”€â”€ components/                 # Components used only within this page
  â”‚   â”‚   â”œâ”€â”€ ListCard.jsx
  â”‚   â”‚   â”œâ”€â”€ Timeline.jsx
  â”‚   â”‚   â””â”€â”€ TimelineCard.jsx
  â”‚   â”œâ”€â”€ CurrentListView.jsx         # "List" subview under the Current page view
  â”‚   â”œâ”€â”€ CurrentTimelineView.jsx     # "Timeline" subview under the Current page view
  â”‚   â”œâ”€â”€ CurrentView.jsx             # Main view component for the Current page
  â”‚   â””â”€â”€ CurrentView.module.css      # CSS module used only by the CurrentView.jsx component
  ```

---

### ğŸ“„ Other Root Files

| Filename                                                 | Description                                                                                                                                           |
|----------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`.env`](../../.env)                                     | Environment variables (e.g. Firebase API key), accessed via `import.meta.env`                                                                         |
| [`.firebaserc`](../../.firebaserc)                       | Firebase project configuration file that stores the associated Firebase project ID and aliases, used to identify the target project during deployment |
| [`.gitignore`](../../.gitignore)                         | Lists files/folders to ignore in Git (e.g. `node_modules`, `.env`)                                                                                    |
| [`commitlint.config.cjs`](../../commitlint.config.cjs)   | Commitlint configuration used with Husky to enforce Angular-style commit messages                                                                     |
| [`eslint.config.js`](../../eslint.config.js)             | ESLint configuration for code style consistency                                                                                                       |
| [`firebase.json`](../../firebase.json)                   | Deployment configuration file for Firebase Hosting and Functions, defining hosting directories, rewrite rules, function entry points, and more        |
| [`index.html`](../../index.html)                         | HTML entry point, Vite injects React app into `<div id="root">`                                                                                       |
| [`package.json`](../../package.json)                     | Project config file, includes dependencies, scripts, metadata                                                                                         |
| [`package-lock.json`](../../package-lock.json)           | Lock file to ensure consistent dependency versions                                                                                                    |
| [`react-router.config.js`](../../react-router.config.js) | React Router config file for custom routing logic (e.g., entry files, SSR mode, build paths)                                                          |
| [`README.md`](../../README.md)                           | Project introduction, usage guide, tech stack                                                                                                         |
| [`README.zh-CN.md`](../../README.zh-CN.md)               | Chinese version of the project documentation, corresponding to the English `README.md`                                                                |
| [`server.js`](../../server.js)                           | Used for local testing of SSR functionality. Deployment to the cloud is not required; it can be started directly using the `npm start` command.       |
| [`vite.config.js`](../../vite.config.js)                 | Vite config file (aliases, plugins, proxies, etc.)                                                                                                    |
